<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>AI Trip Planner ‚Äî Plan Your Perfect Journey</title>
        <meta name="description"
            content="AI-powered travel itinerary planner. Enter your destinations and dates to get a personalized day-wise trip plan with maps, images, and commute info.">

        <!-- Leaflet CSS (OpenStreetMap) -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
            integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/components.css">
    </head>

    <body>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê NAVBAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <nav class="navbar">
            <div class="nav-logo">
                <span class="logo-icon">‚úàÔ∏è</span>
                <span>AI Trip Planner</span>
            </div>
            <div style="display:flex;gap:10px;align-items:center;">
                <button class="btn btn-ghost btn-sm" id="settings-btn">‚öôÔ∏è Settings</button>
            </div>
        </nav>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PROGRESS OVERLAY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="progress-overlay" class="hidden">
            <div class="progress-card">
                <div class="progress-airplane">‚úàÔ∏è</div>
                <div class="progress-title">Planning your trip‚Ä¶</div>
                <div class="progress-label" id="progress-label">Initialising‚Ä¶</div>
                <div class="progress-bar-track">
                    <div class="progress-bar-fill" id="progress-bar-fill" style="width:0%"></div>
                </div>
                <div class="progress-meta">
                    <span id="progress-step">Step 1 of 4</span>
                    <span id="progress-pct">0%</span>
                </div>
                <div class="stage-dots">
                    <div class="stage-dot active" data-step="0">
                        <div class="stage-dot-circle">1</div>
                        <div class="stage-dot-label">Places</div>
                    </div>
                    <div class="stage-dot pending" data-step="1">
                        <div class="stage-dot-circle">2</div>
                        <div class="stage-dot-label">Images</div>
                    </div>
                    <div class="stage-dot pending" data-step="2">
                        <div class="stage-dot-circle">3</div>
                        <div class="stage-dot-label">Itinerary</div>
                    </div>
                    <div class="stage-dot pending" data-step="3">
                        <div class="stage-dot-circle">4</div>
                        <div class="stage-dot-label">Map</div>
                    </div>
                </div>
                <!-- AI model indicator -->
                <div class="ai-model-badge" id="ai-model-badge"
                    style="display:none;margin-top:16px;font-size:12px;color:var(--text-muted);"></div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SETTINGS MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="settings-modal" class="modal-overlay hidden">
            <div class="modal-card">
                <div class="modal-header">
                    <div class="modal-title">‚öôÔ∏è API Settings</div>
                    <button class="modal-close" id="close-settings">‚úï</button>
                </div>

                <div class="modal-field">
                    <label class="input-label" for="key-gemini">Gemini API Key <span
                            style="color:var(--danger)">*</span></label>
                    <input class="input-field" type="password" id="key-gemini" placeholder="AIza...">
                    <div class="modal-hint">Get free at <a href="https://aistudio.google.com" target="_blank"
                            style="color:var(--accent);">aistudio.google.com</a></div>
                </div>

                <div class="modal-field">
                    <label class="input-label" for="key-groq">Groq API Key (Fallback)</label>
                    <input class="input-field" type="password" id="key-groq" placeholder="gsk_...">
                    <div class="modal-hint">Get free at <a href="https://console.groq.com" target="_blank"
                            style="color:var(--accent);">console.groq.com</a>. Used if Gemini fails or times out.</div>
                </div>

                <div style="display:flex;gap:12px;justify-content:flex-end;">
                    <button class="btn btn-ghost" id="close-settings-x">Cancel</button>
                    <button class="btn btn-primary" id="save-settings-btn">Save Keys</button>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TOAST CONTAINER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="toast-container"></div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 1 ‚Äî INPUT
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="screen-input" class="screen">
            <!-- Hero -->
            <section class="hero-section">
                <div class="hero-badge">‚ú® Powered by AI (Gemini + Groq)</div>
                <h1 class="hero-title">
                    Plan Your Perfect<br>
                    <span class="gradient-text">Dream Trip</span>
                </h1>
                <p class="hero-sub">
                    Tell us where you want to go and when ‚Äî our AI builds a day-by-day itinerary,
                    groups nearby attractions, and shows you the best way to get around.
                </p>
            </section>

            <!-- Input Card -->
            <div class="container">
                <div class="glass-card input-card">

                    <!-- Location input -->
                    <div class="modal-field">
                        <label class="input-label" for="location-input">üìç Destinations</label>
                        <div class="chip-input-wrap">
                            <input class="input-field" type="text" id="location-input"
                                placeholder="Type a city, e.g. Delhi‚Ä¶ then press Enter" autocomplete="off">
                            <button class="btn btn-secondary btn-sm" id="add-location-btn" style="white-space:nowrap;">+
                                Add</button>
                        </div>
                        <div class="chip-box" id="chip-box"></div>
                    </div>

                    <!-- Dates -->
                    <div class="date-row" style="margin-top:24px;">
                        <div class="modal-field" style="margin-bottom:0">
                            <label class="input-label" for="start-date">üóìÔ∏è Start Date</label>
                            <input class="input-field" type="date" id="start-date">
                        </div>
                        <div class="modal-field" style="margin-bottom:0">
                            <label class="input-label" for="end-date">üóìÔ∏è End Date</label>
                            <input class="input-field" type="date" id="end-date">
                        </div>
                    </div>

                    <!-- CTA -->
                    <div class="plan-btn-wrap">
                        <button class="btn btn-primary btn-lg plan-btn" id="plan-btn">
                            ‚úàÔ∏è Plan My Trip
                        </button>
                    </div>
                </div>

                <!-- Feature pills -->
                <div class="feature-pills">
                    <div class="feature-pill">üó∫Ô∏è Smart Geo-Grouping</div>
                    <div class="feature-pill">üì∏ Place Images</div>
                    <div class="feature-pill">üöá Commute Info</div>
                    <div class="feature-pill">üìç Interactive Map</div>
                    <div class="feature-pill">üì• Download Itinerary</div>
                    <div class="feature-pill">ü§ñ AI Auto Mode</div>
                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 2 ‚Äî PLACE DISCOVERY
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="screen-discovery" class="screen">
            <div class="container">

                <!-- Header -->
                <div class="discovery-header">
                    <div>
                        <div class="discovery-title">üåç Famous Places</div>
                        <div style="font-size:13px;color:var(--text-muted);margin-top:4px;">
                            Select the places you want to visit, or let AI choose for you
                        </div>
                    </div>
                    <div class="auto-mode-wrap">
                        <div>
                            <div class="auto-label">ü§ñ Auto Mode</div>
                            <div class="auto-sublabel">AI picks the best</div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="auto-toggle">
                            <span class="toggle-thumb"></span>
                        </label>
                    </div>
                </div>

                <!-- Selection status bar -->
                <div class="selection-bar">
                    <span id="selection-count">0 places selected</span>
                    <span style="font-size:12px;color:var(--text-muted);">Click cards to select ¬∑ Enable Auto to let AI
                        decide</span>
                </div>

                <!-- Place cards grid (populated by JS) -->
                <div id="discovery-grid"></div>

                <!-- Bottom action bar -->
                <div class="discovery-action-bar">
                    <button class="btn btn-ghost" id="back-to-input">‚Üê Back</button>
                    <button class="btn btn-primary" id="generate-btn">
                        üß† Generate Itinerary
                    </button>
                </div>

            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 3 ‚Äî ITINERARY
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <div id="screen-itinerary" class="screen">
            <div class="container">

                <!-- Top row -->
                <div class="itin-top" style="padding-top:28px;">
                    <div>
                        <div class="itin-title">üóìÔ∏è Your Itinerary</div>
                        <div class="itin-summary-text" id="itin-summary">Loading‚Ä¶</div>
                        <div class="ai-provider-tag" id="ai-provider-tag"
                            style="display:none;margin-top:6px;font-size:12px;"></div>
                    </div>
                    <div style="display:flex;gap:10px;flex-wrap:wrap;">
                        <button class="btn btn-ghost btn-sm" id="back-to-discovery">‚Üê Edit Places</button>
                        <button class="btn btn-secondary btn-sm" id="new-trip-btn">üîÑ New Trip</button>
                    </div>
                </div>

                <!-- Two-column layout: accordion + map -->
                <div class="itinerary-layout">

                    <!-- Left: Accordion -->
                    <div class="itinerary-panel">
                        <div id="itinerary-accordion"></div>

                        <!-- Download bar -->
                        <div class="download-bar">
                            <div>
                                <div class="download-title">üì• Download Itinerary</div>
                                <div class="download-sub">Save your trip plan to share or print</div>
                            </div>
                            <div class="download-btns">
                                <button class="btn btn-outline btn-sm" id="copy-btn">üìã Copy</button>
                                <button class="btn btn-secondary btn-sm" id="download-txt-btn">üìÑ Text</button>
                                <button class="btn btn-primary btn-sm" id="download-pdf-btn">üìë PDF</button>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Map -->
                    <div class="map-panel">
                        <div class="map-container" id="map-container"></div>
                        <div class="day-legend" id="day-legend"></div>
                    </div>

                </div>
            </div>
        </div>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCRIPTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <!-- Leaflet JS (OpenStreetMap) -->
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

        <script type="module" src="js/app.js"></script>
        <script>
  // Close settings modal on overlay click
  document.getElementById('settings-modal').addEventListener('click', function(e) {
    if (e.target === this) this.classList.add('hidden');
  });

  // Extra cancel button in modal
  document.addEventListener('DOMContentLoaded', () => {
    document.getElementById('close-settings-x')?.addEventListener('click', () => {
      document.getElementById('settings-modal').classList.add('hidden');
    });
  });
        </script>

    </body>

</html>
